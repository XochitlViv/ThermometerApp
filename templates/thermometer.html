<!DOCTYPE html>
<html>
<head>
  <title>100B Meals Thermometer</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

<div class="container">
  <div class="thermometer">
    <div class="mercury" id="mercury"></div>
    <div class="bulb"></div>
  </div>

  <div class="totals" id="totalsText">
    Loading totalsâ€¦
  </div>
</div>

<script>
async function updateThermometer() {
  const res = await fetch("/totals");
  const data = await res.json();

  const percent = Math.min(data.percent, 100);
  document.getElementById("mercury").style.height = percent + "%";

  document.getElementById("totalsText").innerText =
    `$${data.total.toLocaleString()} raised of $${data.goal.toLocaleString()} (${percent.toFixed(2)}%)`;
}

updateThermometer();
setInterval(updateThermometer, 20000);
</script>

</body>
</html>
